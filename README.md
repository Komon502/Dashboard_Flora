
# üå± Flora Care -- BLE + ESP32 + Node.js Express Dashboard

‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡∏±‡∏î‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÅ‡∏ö‡∏ö Real-time ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ **ESP32 (Client/Server), BLE**, ‡πÅ‡∏•‡∏∞ **Node.js Backend (REST API)**  
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô Server ‡∏ú‡πà‡∏≤‡∏ô HTTP ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö/‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡πà‡∏≠

---

## üìå 1. ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (System Overview)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà  
- üå° ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥  
- üíß ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®  
- üå± ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô  
- ‚öô ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Servo (‡∏≠‡∏á‡∏®‡∏≤)

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á:

1. **ESP32 Client (Sensor Node)**  
   - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å DHT11  
   - ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô  
   - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô JSON ‡∏ú‡πà‡∏≤‡∏ô **BLE** ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Server

2. **ESP32 Server (Gateway)**  
   - ‡∏£‡∏≠‡∏£‡∏±‡∏ö BLE ‡∏à‡∏≤‡∏Å Client  
   - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏°‡∏≤  
   - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á **Node.js Express Backend** ‡∏ú‡πà‡∏≤‡∏ô HTTP POST  
     URL ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:  
     `http://<server-ip>:3000/api/ingest`

3. **Node.js Express Backend**  
   - ‡∏£‡∏±‡∏ö JSON ‡∏à‡∏≤‡∏Å ESP32 Server  
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Dashboard  
   - ‡πÉ‡∏ä‡πâ MySQL ‡∏´‡∏£‡∏∑‡∏≠ NoSQL ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

---

## üìå 2. ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö (System Architecture)

```
[ ESP32 Client ] --BLE--> [ ESP32 Server ] --HTTP JSON--> [ Node.js API ] --> Database / Dashboard
```

---

## üìå 3. ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (Hardware)

| ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|---------|---------|
| ESP32 DevKit | ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Client ‡πÅ‡∏•‡∏∞ Server |
| DHT11 | ‡∏ß‡∏±‡∏î‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏® |
| Soil Moisture Sensor | ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô |
| Servo Motor | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ô‡πâ‡∏≥ |
| Node.js Express | ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON ‡∏à‡∏≤‡∏Å ESP32 Server |

---

## üìå 4. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡πà‡∏á ESP32 Client

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á Client**  
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å DHT11  
- ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡∏î‡∏¥‡∏ô  
- ‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Servo  
- ‡∏™‡∏£‡πâ‡∏≤‡∏á JSON  
- ‡∏™‡πà‡∏á JSON ‡∏ú‡πà‡∏≤‡∏ô BLE Characteristic

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á JSON:

```json
{
  "temperature": 29.5,
  "humidity": 70,
  "soil": 480,
  "servo": 90
}
```

---

## üìå 5. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡πà‡∏á ESP32 Server (Gateway)

**‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á Server**  
- ‡∏™‡πÅ‡∏Å‡∏ô‡∏´‡∏≤ BLE Client  
- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• JSON  
- ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö HTTP POST ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Node.js API

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á JSON ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ Backend:

```json
{
  "client_id": "ESP32-001",
  "temperature": 29.5,
  "humidity": 70,
  "soil": 480,
  "servo": 90,
  "timestamp": "2025-11-28T14:22:01"
}
```

---

## üìå 6. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Node.js Backend

1) ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á  
```
npm install
npm install express cors body-parser mysql2
```

2) ‡∏£‡∏±‡∏ô server  
```
node server.js
```

Backend ‡∏à‡∏∞‡∏£‡∏≠‡∏ó‡∏µ‡πà  
üëâ `http://<your-ip>:3000/api/ingest`

---

## üìå 7. ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö

1. ‡πÄ‡∏õ‡∏¥‡∏î ESP32 Client ‚Üí ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå  
2. ‡πÄ‡∏õ‡∏¥‡∏î ESP32 Server ‚Üí BLE ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠  
3. Server ‡∏™‡πà‡∏á JSON ‡πÑ‡∏õ Node.js  
4. ‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô console:  
```
Received data: {...}
```

---

## üìå 8. ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

### ‚ùå BLE ‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠  
- UUID ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á  
- ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 5‚Äì10 ‡πÄ‡∏°‡∏ï‡∏£

### ‚ùå Node.js ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•  
- IP ‡∏ú‡∏¥‡∏î  
- hotspot/change network  
- URL ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô  
  ```
  http://<server-ip>:3000/api/ingest
  ```

### ‚ùå JSON ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö  
- Client ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö  
- Server ‡∏≠‡πà‡∏≤‡∏ô Characteristic ‡∏ú‡∏¥‡∏î

---